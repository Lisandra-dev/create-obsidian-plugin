// eslint-disable-next-line @typescript-eslint/no-var-requires
const c = require("ansi-colors");
// eslint-disable-next-line @typescript-eslint/no-var-requires
const { execSync } = require("child_process");
// eslint-disable-next-line @typescript-eslint/no-var-requires
require("dotenv").config(); 
let vaultDev = process.env.VAULT_DEV || "";
let msg = "";
if (vaultDev.trim().length > 0) {
	vaultDev = `-v ${vaultDev}`;
	msg = `-v ${c.underline(vaultDev)}`;
}
const hasStyleSheet = <%- plugin.hasStyleSheet ? " --with-stylesheet src/styles.css" : '""' %>;
const command = `obsidian-plugin dev${hasStyleSheet} src/main.ts ${vaultDev}`;
console.log(c.blue.italic(`${c.bold.red(">")} obsidian-plugin dev${c.yellow.underline(hasStyleSheet)} src/main.ts ${msg}`));
execSync(command, { stdio: "inherit" });