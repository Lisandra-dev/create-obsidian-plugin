/* eslint-disable @typescript-eslint/no-var-requires */
const c = require("ansi-colors");
const { execSync } = require("child_process");
require("dotenv").config(); 
let vaultDev = process.env.VAULT_DEV || "";
let msg = "";
if (vaultDev.trim().length > 0) {
	vaultDev = `-v ${vaultDev}`;
	msg = `-v ${c.underline(process.env.VAULT_DEV)}`;
}
const hasStyleSheet = "<%- plugin.hasStylesheet ? " --with-stylesheet src/styles.css " : '' %>";
const command = `obsidian-plugin dev src/main.ts${hasStyleSheet}${vaultDev}`;
console.log(c.blue.italic(`${c.bold.red(">")} obsidian-plugin dev src/main.ts${c.yellow.underline(hasStyleSheet)}${msg}`));
execSync(command, { stdio: "inherit" });